                    User-Visible krb5-strength Changes

krb5-strength 2.1 (unreleased)

    Fix the package build when CDB support is disabled or TinyCDB was not
    found.

    Some of the password rejection error messages have been changed to
    make them more accurate or comprehensible to the user.

    Passing --with-tinycdb to configure now correctly makes TinyCDB
    support mandatory without adding bogus directories to the library and
    include search paths.

krb5-strength 2.0 (2013-10-07)

    Add support for the MIT Kerberos password quality plugin interface,
    available in MIT Kerberos 1.9 and later, contributed by Greg Hudson
    and MIT.  Drop the patch for MIT Kerberos 1.4 (and hence support for
    versions of MIT Kerberos prior to 1.9).  A dictionary path set in
    krb5.conf takes precedence over the dictionary path provided by MIT
    Kerberos when the plugin is initialized, if both are set, to allow the
    dict_path configuration setting to be used for other plugins while
    using a separate dictionary for krb5-strength.

    The default installation path for this plugin is now
    /usr/local/lib/krb5/plugins/pwqual/strength.so (for both MIT and
    Heimdal), assuming a --libdir setting of /usr/local/lib.  This may
    require updates to the Kerberos KDC configuration or moving the plugin
    when upgrading from earlier versions.

    Add support for building with TinyCDB and then checking passwords
    against a CDB database.  There is a new password_dictionary_cdb
    krb5.conf configuration setting that configures a CDB directory to
    use.  The tests with a CDB dictionary are much simpler: passwords are
    rejected if found in the dictionary either literally, with one or two
    characters removed from the start or end, or with one character
    removed from both the start and the end.  Both a CrackLib and a CDB
    dictionary can be specified to check both dictionaries.  A new
    cdbmake-wordlist utility (written in Perl) is included to ease the
    process of creating a CDB database from a simple word list.

    A minimum password length can now be enforced directly via the plugin
    or external check program without relying on CrackLib.  To set a
    minimum password length, add a minimum_length setting to the
    krb5-strength section of [appdefaults] in krb5.conf.

    New boolean settings require_ascii_printable and require_non_letter
    are supported in the krb5-strength setting of [appdefaults] in
    krb5.conf.  The former rejects passwords containing characters other
    than printable ASCII characters (including space), and the latter
    requires that passwords contain at least one character that is not a
    letter (upper or lower case) or a space.

    The plugin can now be configured without a dictionary, in which case
    only checks for a password based on the principal and the simpler
    checks available through the new configuration variables are done.
    This mode is mostly useful for testing, since such simple checking can
    more easily be done via less complex password strength configurations.

    The check for passwords based on the principal now check for passwords
    formed by reversing or adding numbers before and after each separate
    component of the principal.  This will catch passwords based on the
    realm or components of the realm, which will often catch passwords
    based on the name of the local institution.

    The plugin now sets the Kerberos error message in the context to pass
    error information, resulting in higher-quality error reporting in the
    MIT Kerberos plugin.

    CrackLib checks for passwords where a character is a simple increment
    or decrement of the previous character.  In previous versions, the
    embedded version of CrackLib allowed at most four such occurrences in
    the entire password.  This results in false positives on long
    passphrases, since such accidental letter relationships aren't
    uncommon in human languages.  Change the embedded CrackLib to allow
    one such simple increment for every three characters in the password,
    which tightens the check somewhat for shorter passwords and loosens it
    considerably for longer passwords.

    Expect the Heimdal password strength checking plugin header in
    kadm5/kadm5-pwcheck.h instead of outside of the kadm5 directory.  This
    is the path used by current versions of Heimdal.  Drop support for
    older versions of Heimdal that don't install this header file.

    Update to rra-c-util 4.9:

    * Probe for Kerberos headers using file checks instead of compiles.
    * Improve probe for the Heimdal libroken library.
    * Always build with large file support.
    * Conditionally call AM_PROG_AR for portability to new Autotools.

    Update to C TAP Harness 2.2:

    * Allow more easily running single programs under tests/runtests.
    * Flush the output from the test harness after each test.

krb5-strength 1.1 (2012-05-11)

    Change the minimum password length in the embedded CrackLib to 8.

    Reject passwords formed from the username portion of the principal
    with digits appended.

    In the embedded CrackLib, also check for a duplicated dictionary word.

    Support linking with the system CrackLib instead of the embedded and
    stricter copy by passing --with-cracklib to configure.

    Fix variable sizes in the embedded CrackLib on 64-bit platforms.  This
    may fix interoperability problems with databases created on platforms
    with a different native integer size.  Thanks, Karl Lehnberger and
    Benj Carson.

    Stop using local in the test suite for portability to Solaris /bin/sh.

    Update to rra-c-util 4.4:

    * Use PATH_KRB5_CONFIG to override krb5-config location.
    * Fix probing for ibm_svc/krb5_svc.h on AIX.
    * Support Heimdal libraries without libroken, like OpenBSD.
    * Fix manual Kerberos library probing without transitive dependencies.
    * Support systems that only have krb5/krb5.h.
    * Pass --deps to krb5-config in the non-reduced-dependencies case.
    * Silence __attribute__ warnings on more compilers.
    * Update warning flags for make warnings.
    * Flesh out MAINTCLEANFILES to remove autogen results.
    * Add notices to all files copied from rra-c-util.

    Update to C TAP Harness 1.12:

    * Drop is_double from the C TAP library to avoid requiring -lm.
    * Avoid using local in the shell libtap.sh library.
    * Silence __attribute__ warnings on more compilers.
    * runtests now frees all allocated resources on exit.
    * Fix runtests to still honor SOURCE and -s without BUILD and -b.
    * Add tests/HOWTO documenting how to add new tests.
    * Ensure correct output ordering in test results.
    * Add -h and a better usage message to tests/runtests.

krb5-strength 1.0 (2010-02-16)

    Add heimdal-strength, a program that checks password strength using
    the protocol for a Heimdal external check program.

    The shared module now also exports the interface expected by Heimdal's
    dynamically loaded password strength checking API and can be used as a
    Heimdal kadmin plugin.

    Add a new plugin API for MIT Kerberos modelled after the plugin API
    used for other MIT Kerberos plugins.  Thanks to Marcus Watts for
    substantial research and contributions to the interface design.  This
    work is incomplete in this release, missing the corresponding patch to
    MIT Kerberos.

    Fixed the data format written by the included packer program to add
    enough nul bytes at the end of the data.  Previously, there was not
    enough trailing nul bytes for the expected input format, leading to
    uninitialized memory reads in the password lookup.

    Add a test suite using the driver and library from C TAP Harness 1.1.

    Add portability code for platforms without a working snprintf or other
    deficiencies and updated the code to take advantage of those
    guarantees.

krb5-strength 0.5 (2007-07-18)

    The check of the password against the principal checked against the
    fully-qualified principal, which is not the usual problem.
    Additionally check that the password doesn't match the principal with
    the realm removed or the reverse of that (case-insensitive).

krb5-strength 0.4 (2007-03-28)

    The patches directory was omitted from the distribution.  Really
    include it.

krb5-strength 0.3 (2007-03-23)

    Initial public release.  Includes a patch for MIT Kerberos, a slightly
    modified version of CrackLib, and glue wrapped around CrackLib to make
    a loadable module.
